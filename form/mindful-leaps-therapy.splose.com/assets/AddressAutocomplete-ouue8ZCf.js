import{b as o,aB as b,z as v,aq as x}from"./index-FU15wMs0.js";import{s as w,bi as S,o as A}from"./AddressAutocomplete.module-B6NgFNL3.js";const O=s=>{const[p,y]=o.useState(!0),[_,r]=o.useState(),l=o.useRef(null);function C(a){r(a.target.value),s.onChange&&s.onChange(a.target.value)}function i(){var u;y(!1);let a="";if(l.current==null||l.current.input==null||window.google==null)return;const d=new window.google.maps.places.Autocomplete((u=l.current)==null?void 0:u.input);d.addListener("place_changed",()=>{var c,g,f,m,h;const e=d.getPlace();if(!e.geometry){A.warning(`No details available for '${e.name}'`);return}const n={name:e.name??"",suburb:"",state:"",postalCode:"",countryLong:"",countryShort:"",lat:((c=e.geometry.location)==null?void 0:c.lat())??0,lng:((g=e.geometry.location)==null?void 0:g.lng())??0,formattedAddress:e.formatted_address};(f=e.address_components)==null||f.forEach(t=>{t.types.indexOf("locality")>=0?n.suburb=t.short_name:t.types.indexOf("administrative_area_level_1")>=0?n.state=t.short_name:t.types.indexOf("postal_code")>=0?n.postalCode=t.short_name:t.types.indexOf("country")>=0&&(n.countryShort=t.short_name,n.countryLong=t.long_name)}),s.onPlaceChange&&s.onPlaceChange(n),(m=e.types)!=null&&m.includes("street_address")||(h=e.types)!=null&&h.includes("premise")?a=e.formatted_address??"":a=`${e.name}, ${e.formatted_address}`,r(a),s.onChange&&s.onChange(a)})}return o.useEffect(()=>{r(s.value)},[s.value]),o.useEffect(()=>{var a;((a=window.google)==null?void 0:a.maps)!=null?i():b("googleapis/map",`https://maps.googleapis.com/maps/api/js?key=${x}&libraries=places`,i)},[]),v.jsx(w,{id:"address",className:S.addressInput,placeholder:"Search an address",ref:l,value:_,onChange:C,disabled:p})};export{O as A};
